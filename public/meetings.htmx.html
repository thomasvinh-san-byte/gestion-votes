<!doctype html>
<html lang="fr" data-page-role="viewer">
<head>
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Gestion des séances - AG-VOTE">
  <title>Séances — AG-VOTE</title>
  <link rel="stylesheet" href="/assets/css/app.css">
</head>
<body>
  <!-- Skip links for accessibility -->
  <a href="#main-content" class="skip-link">Aller au contenu principal</a>
  <a href="#main-nav" class="skip-link">Aller à la navigation</a>

  <div class="app-shell">
    <aside class="app-sidebar" data-include-sidebar data-page="meetings"></aside>

    <!-- Page header -->
    <div class="page-header-bar">
      <h1>
        <svg class="icon icon-text icon-md" aria-hidden="true"><use href="/assets/icons.svg#icon-clipboard-list"></use></svg>
        Séances
      </h1>
      <div class="page-header-actions">
        <button class="btn btn-ghost btn-icon" type="button" data-drawer="menu" title="Menu">
          <svg class="icon" aria-hidden="true"><use href="/assets/icons.svg#icon-menu"></use></svg>
        </button>
      </div>
    </div>

    <!-- Stats bar -->
    <div class="stats-bar">
      <div class="stat-item live">
        <div class="stat-value" id="statLive">0</div>
        <div class="stat-label">En cours</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="statScheduled">0</div>
        <div class="stat-label">Planifiées</div>
      </div>
      <div class="stat-item draft">
        <div class="stat-value" id="statDraft">0</div>
        <div class="stat-label">Brouillons</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="statTotal">0</div>
        <div class="stat-label">Total</div>
      </div>
      <div class="stat-item">
        <span class="stat-value" id="statResolutions">0</span>
        <span class="stat-label">Résolutions</span>
      </div>
      <div class="stat-item">
        <span class="stat-value" id="statAvgParticipation">—</span>
        <span class="stat-label">Participation moy.</span>
      </div>
    </div>

    <main class="app-main" id="main-content" style="padding: 0;" role="main">
      <div class="page-content">
        <div id="notif_box" class="alert hidden mb-4"></div>

        <!-- Create card -->
        <div class="create-card">
          <h3>
            <svg class="icon icon-text" aria-hidden="true"><use href="/assets/icons.svg#icon-plus"></use></svg>
            Nouvelle séance
          </h3>
          <div class="create-form">
            <input class="form-input" type="text" id="meeting_title" placeholder="Titre de la séance (ex: Assemblée Générale 2024)" required>
            <input class="form-input" type="date" id="meeting_date" style="max-width: 160px;">
            <button class="btn btn-primary" id="create_meeting_btn">Créer la séance</button>
          </div>
        </div>

        <!-- Filter tabs -->
        <div class="filter-tabs">
          <button class="filter-tab active" data-filter="all">Toutes</button>
          <button class="filter-tab" data-filter="live">En cours</button>
          <button class="filter-tab" data-filter="scheduled">Planifiées</button>
          <button class="filter-tab" data-filter="draft">Brouillons</button>
          <button class="filter-tab" data-filter="archived">Archives</button>
        </div>

        <!-- Search and Sort -->
        <div class="meetings-toolbar">
          <div class="form-group form-group-search">
            <input class="form-input" type="search" id="meetingsSearch" placeholder="Rechercher par titre..." aria-label="Rechercher une séance">
          </div>
          <div class="form-group">
            <select class="form-input form-input-sm" id="meetingsSort" aria-label="Trier par">
              <option value="status">Trier par statut</option>
              <option value="date_desc">Date (récent d'abord)</option>
              <option value="date_asc">Date (ancien d'abord)</option>
              <option value="title">Titre A-Z</option>
            </select>
          </div>
        </div>

        <!-- Section header -->
        <div class="section-header">
          <span class="section-title">Liste des séances</span>
          <div style="display: flex; align-items: center; gap: 1rem;">
            <span class="text-sm text-muted" id="meetingsCount">0 séances</span>
            <div class="view-toggle">
              <button class="view-toggle-btn active" data-view="grid" title="Vue grille">
                <svg class="icon" aria-hidden="true"><use href="/assets/icons.svg#icon-grid"></use></svg>
              </button>
              <button class="view-toggle-btn" data-view="calendar" title="Vue calendrier">
                <svg class="icon" aria-hidden="true"><use href="/assets/icons.svg#icon-calendar"></use></svg>
              </button>
            </div>
          </div>
        </div>

        <!-- Meetings grid -->
        <div class="meetings-grid" id="meetingsList">
          <div class="skeleton-row"><div class="skeleton skeleton-cell"></div><div class="skeleton skeleton-cell"></div><div class="skeleton skeleton-cell"></div></div>
          <div class="skeleton-row"><div class="skeleton skeleton-cell"></div><div class="skeleton skeleton-cell"></div><div class="skeleton skeleton-cell"></div></div>
          <div class="skeleton-row"><div class="skeleton skeleton-cell"></div><div class="skeleton skeleton-cell"></div><div class="skeleton skeleton-cell"></div></div>
        </div>

        <!-- Calendar view -->
        <div class="calendar-container" id="calendarContainer">
          <div class="calendar-header">
            <div class="calendar-nav">
              <button class="calendar-nav-btn" id="calendarPrev" title="Mois précédent">
                <svg class="icon" aria-hidden="true"><use href="/assets/icons.svg#icon-chevron-left"></use></svg>
              </button>
              <span class="calendar-title" id="calendarTitle">Janvier 2026</span>
              <button class="calendar-nav-btn" id="calendarNext" title="Mois suivant">
                <svg class="icon" aria-hidden="true"><use href="/assets/icons.svg#icon-chevron-right"></use></svg>
              </button>
            </div>
            <button class="btn btn-sm btn-ghost calendar-today-btn" id="calendarToday">Aujourd'hui</button>
          </div>
          <div class="calendar-grid" id="calendarGrid">
            <!-- Generated by JS -->
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Drawer -->
  <div class="drawer-backdrop" data-drawer-close aria-hidden="true"></div>
  <aside class="drawer" id="drawer" role="dialog" aria-modal="true" aria-labelledby="drawerTitle" aria-hidden="true">
    <header class="drawer-header">
      <button data-drawer-close class="btn btn-icon btn-ghost" aria-label="Fermer le panneau">✕</button>
      <h2 class="drawer-title" id="drawerTitle">Menu</h2>
    </header>
    <div class="drawer-body" id="drawerBody"></div>
  </aside>

  <script src="/assets/js/core/utils.js"></script>
  <script type="module" src="/assets/js/components/index.js"></script>
  <script src="/assets/js/core/shared.js"></script>
  <script src="/assets/js/core/shell.js"></script>
  <script src="/assets/js/core/page-components.js"></script>
  <script src="/assets/js/pages/meetings.js"></script>
</body>
</html>
