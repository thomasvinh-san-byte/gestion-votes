#!/usr/bin/env php
<?php
declare(strict_types=1);

/**
 * AG-VOTE CLI â€” Symfony Console entry point.
 *
 * Usage:
 *   php bin/console                          # list all commands
 *   php bin/console email:process-queue      # process pending emails
 *   php bin/console ratelimit:cleanup        # clean old rate-limit files
 *   php bin/console redis:health             # check Redis connectivity
 */

require_once __DIR__ . '/../vendor/autoload.php';

// Boot application (env, config, DB) without HTTP headers
\AgVote\Core\Application::bootCli();

use Symfony\Component\Console\Application;
use AgVote\Command\EmailProcessQueueCommand;
use AgVote\Command\RateLimitCleanupCommand;
use AgVote\Command\RedisHealthCommand;

$app = new Application('AG-VOTE', '1.0.0');

$app->add(new EmailProcessQueueCommand());
$app->add(new RateLimitCleanupCommand());
$app->add(new RedisHealthCommand());

$app->run();
