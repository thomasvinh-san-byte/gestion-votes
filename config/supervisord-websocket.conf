# Supervisord config for AG-Vote WebSocket Server
#
# Copy to /etc/supervisor/conf.d/agvote-ws.conf
# Then: supervisorctl reread && supervisorctl update
#
# Environment variables:
#   WS_PORT - WebSocket port (default: 8080)
#   WS_HOST - Bind address (default: 0.0.0.0)

[program:agvote-websocket]
command=/usr/bin/php /var/www/agvote/bin/websocket-server.php
directory=/var/www/agvote
user=www-data
autostart=true
autorestart=true
startsecs=5
startretries=3
stopwaitsecs=10
stdout_logfile=/var/log/agvote/websocket.log
stdout_logfile_maxbytes=10MB
stdout_logfile_backups=5
stderr_logfile=/var/log/agvote/websocket-error.log
stderr_logfile_maxbytes=10MB
stderr_logfile_backups=5
environment=WS_PORT="8080",WS_HOST="0.0.0.0"
