# =============================================================================
# AG-VOTE — Configuration
# =============================================================================
# Copiez ce fichier vers .env et adaptez les valeurs.
# JAMAIS de secrets en dur dans le code !
#
# Pour un déploiement PRODUCTION, voir la section [PRODUCTION] ci-dessous.

# -----------------------------------------------------------------------------
# Application
# -----------------------------------------------------------------------------
# Valeurs acceptées pour APP_ENV : development | demo | production
APP_ENV=development
APP_DEBUG=1
APP_SECRET=dev-secret-do-not-use-in-production-change-me-now-please-64chr

# [PRODUCTION] Décommentez et adaptez :
# APP_ENV=production
# APP_DEBUG=0
# APP_SECRET=   ← générer avec: php -r "echo bin2hex(random_bytes(32));"

# -----------------------------------------------------------------------------
# Base de données PostgreSQL
# Utilisez un utilisateur dédié (ne pas utiliser 'postgres' en production)
# Exécuter: database/setup.sh pour créer l'utilisateur et la base
# -----------------------------------------------------------------------------
DB_DSN=pgsql:host=localhost;port=5432;dbname=vote_app
DB_USER=vote_app
DB_PASS=CHANGEZ_CE_MOT_DE_PASSE

# [PRODUCTION] Ajouter sslmode=require pour les connexions cloud :
# DB_DSN=pgsql:host=<host>;port=5432;dbname=vote_app;sslmode=require

# -----------------------------------------------------------------------------
# Multi-tenant
# -----------------------------------------------------------------------------
DEFAULT_TENANT_ID=aaaaaaaa-1111-2222-3333-444444444444

# [PRODUCTION] Remplacez par l'UUID de votre organisation :
# DEFAULT_TENANT_ID=<votre-uuid>

# -----------------------------------------------------------------------------
# Sécurité
# -----------------------------------------------------------------------------
# Auth par email/mot de passe (sessions PHP). Mettre à 0 pour désactiver temporairement.
# IMPORTANT : les 3 DOIVENT être à 1 en production !
APP_AUTH_ENABLED=1
CSRF_ENABLED=1
RATE_LIMIT_ENABLED=1

# Durée de vie du token CSRF (secondes)
CSRF_LIFETIME=3600

# Rate limiting (requêtes/période)
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_PERIOD=60

# Données de démo (utilisateurs test, AG fictives)
# DOIT être à 0 en production !
LOAD_DEMO_DATA=1

# [PRODUCTION] :
# LOAD_DEMO_DATA=0

# -----------------------------------------------------------------------------
# CORS (origines autorisées, séparées par virgules)
# -----------------------------------------------------------------------------
CORS_ALLOWED_ORIGINS=http://localhost:8080,http://127.0.0.1:8080

# [PRODUCTION] :
# CORS_ALLOWED_ORIGINS=https://vote.mondomaine.fr

# -----------------------------------------------------------------------------
# Email (optionnel, pour envoi de rapports)
# -----------------------------------------------------------------------------
MAIL_HOST=smtp.example.com
MAIL_PORT=587
MAIL_USER=
MAIL_PASS=
MAIL_FROM=noreply@example.com
MAIL_FROM_NAME="AG-VOTE"

# -----------------------------------------------------------------------------
# Stockage
# -----------------------------------------------------------------------------
STORAGE_PATH=/tmp/ag-vote

# -----------------------------------------------------------------------------
# PDF (DomPDF)
# -----------------------------------------------------------------------------
DOMPDF_FONT_DIR=/tmp/ag-vote/fonts
DOMPDF_CACHE_DIR=/tmp/ag-vote/dompdf
